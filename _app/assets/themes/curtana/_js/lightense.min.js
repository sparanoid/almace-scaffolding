/*! lightense-images v1.0.8 | Â© Tunghsiao Liu | MIT */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Lightense=t():e.Lightense=t()}(window,function(){return function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(){"use strict";var n,y=window,v=document,k={time:300,padding:40,offset:40,keyboard:!0,cubicBezier:"cubic-bezier(.2, 0, .1, 1)",background:"rgba(255, 255, 255, .98)",zIndex:2147483647,beforeShow:void 0,afterShow:void 0,beforeHide:void 0,afterHide:void 0},w={};function o(e){var t=w[e];if(t){if("function"!=typeof t)throw"config.".concat(e," must be a function!");Reflect.apply(t,w,[w])}}function r(t){t.src&&!t.classList.contains("lightense-target")&&(t.classList.add("lightense-target"),t.addEventListener("click",function(e){if(w.keyboard&&(e.metaKey||e.ctrlKey))return y.open(t.src,"_blank");!function(e){if(w.target=e,w.target.classList.contains("lightense-open"))return s();var n,r,i;o("beforeShow"),w.scrollY=y.scrollY,n=w.target,r="transitionend",i=function(){o("afterShow")},n.addEventListener(r,function e(t){Reflect.apply(i,this,t),n.removeEventListener(r,e)});var t=new Image;t.onload=function(){!function(e){var t=e.width,n=e.height,r=y.pageYOffset||v.documentElement.scrollTop||0,i=y.pageXOffset||v.documentElement.scrollLeft||0,o=w.target.getBoundingClientRect(),a=t/o.width,c=y.innerWidth||v.documentElement.clientWidth||0,s=y.innerHeight||v.documentElement.clientHeight||0,l=w.target.getAttribute("data-lightense-padding")||w.target.getAttribute("data-padding")||w.padding,d=l<c?c-l:c-k.padding,u=l<s?s-l:s-k.padding,g=t/n,f=d/u;w.scaleFactor=t<d&&n<u?a:g<f?u/n*a:d/t*a;var p=c/2,b=r+s/2,h=o.left+i+o.width/2,m=o.top+r+o.height/2;w.translateX=Math.round(p-h),w.translateY=Math.round(b-m)}(this),function(){w.target.classList.add("lightense-open"),w.wrap=v.createElement("div"),w.wrap.className="lightense-wrap",setTimeout(function(){w.target.style.transform="scale("+w.scaleFactor+")"},20),w.target.parentNode.insertBefore(w.wrap,w.target),w.wrap.appendChild(w.target),setTimeout(function(){w.wrap.style.transform="translate3d("+w.translateX+"px, "+w.translateY+"px, 0)"},20);var e={cubicBezier:w.target.getAttribute("data-lightense-cubic-bezier")||w.cubicBezier,background:w.target.getAttribute("data-lightense-background")||w.target.getAttribute("data-background")||w.background,zIndex:w.target.getAttribute("data-lightense-z-index")||w.zIndex},t=u({},w,e);c("lightense-images-css-computed","\n    :root {\n      --lightense-z-index: ".concat(t.zIndex-1,";\n      --lightense-backdrop: ").concat(t.background,";\n      --lightense-duration: ").concat(t.time,"ms;\n      --lightense-timing-func: ").concat(t.cubicBezier,";\n      --lightense-backdrop-safari: ").concat(a(t.background),";\n    }")),w.container.style.visibility="visible",setTimeout(function(){w.container.style.opacity="1"},20)}(),y.addEventListener("keyup",d,!1),y.addEventListener("scroll",l,!1),w.container.addEventListener("click",s,!1)},t.src=w.target.src}(this)},!1))}function a(e){var t,n,r=/^#([A-Fa-f0-9]{3}){1,2}$/.test(t=e)?(3===(n=t.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),"rgba("+[(n="0x"+n.join(""))>>16&255,n>>8&255,255&n].join(", ")+", 1)"):/(rgb\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t.replace(")",", 1)"):/(rgba\((?:\d{1,3}[,)] ?){3}(?:\d?\.\d+\))?)/.test(t)?t:k.background,i=/([\d.]+)\)$/g,o=i.exec(r)[1];return r.replace(i,.7*o+")")}function c(e,t){var n=v.head||v.getElementsByTagName("head")[0];v.getElementById(e)&&v.getElementById(e).remove();var r=v.createElement("style");r.id=e,r.styleSheet?r.styleSheet.cssText=t:r.appendChild(v.createTextNode(t)),n.appendChild(r)}function s(){o("beforeHide"),y.removeEventListener("keyup",d,!1),y.removeEventListener("scroll",l,!1),w.container.removeEventListener("click",s,!1),w.target.classList.remove("lightense-open"),w.wrap.style.transform="",w.target.style.transform="",w.target.classList.add("lightense-transitioning"),w.container.style.opacity="",setTimeout(function(){o("afterHide"),w.container.style.visibility="",w.container.style.backgroundColor="",w.wrap.parentNode.replaceChild(w.target,w.wrap),w.target.classList.remove("lightense-transitioning")},w.time)}function l(){Math.abs(w.scrollY-y.scrollY)>=w.offset&&s()}function d(e){e.preventDefault(),27===e.keyCode&&s()}return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n=function(e){switch(g(e)){case"undefined":throw"You need to pass an element!";case"string":return v.querySelectorAll(e);case"object":return e}}(e),w=u({},k,t),c("lightense-images-css","\n:root {\n  --lightense-z-index: ".concat(w.zIndex-1,";\n  --lightense-backdrop: ").concat(w.background,";\n  --lightense-backdrop-safari: ").concat(a(w.background),";\n  --lightense-duration: ").concat(w.time,"ms;\n  --lightense-timing-func: ").concat(w.cubicBezier,";\n}\n\n.lightense-backdrop {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: calc(var(--lightense-z-index) - 1);\n  padding: 0;\n  margin: 0;\n  transition: opacity var(--lightense-duration) ease;\n  cursor: zoom-out;\n  opacity: 0;\n  background-color: var(--lightense-backdrop);\n  visibility: hidden;\n}\n\n@supports (-webkit-backdrop-filter: blur(30px)) {\n  .lightense-backdrop {\n    background-color: var(--lightense-backdrop-safari);\n    -webkit-backdrop-filter: blur(30px);\n    backdrop-filter: blur(30px);\n  }\n}\n\n.lightense-wrap {\n  position: relative;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  z-index: var(--lightense-z-index);\n  pointer-events: none;\n}\n\n.lightense-target {\n  cursor: zoom-in;\n  transition: transform var(--lightense-duration) var(--lightense-timing-func);\n  pointer-events: auto;\n}\n\n.lightense-open {\n  cursor: zoom-out;\n}\n\n.lightense-transitioning {\n  pointer-events: none;\n}")),v.querySelector(".lightense-backdrop")||(w.container=v.createElement("div"),w.container.className="lightense-backdrop",v.body.appendChild(w.container)),function(e){var t=e.length;if(t)for(var n=0;n<t;n++)r(e[n]);else r(e)}(n)}}();e.exports=n}])});
